# Open Deep Research — Security PoC Harness (Safe)

Этот набор скриптов — **безопасные** тесты на устойчивость Open Deep Research к классам атак.
Скрипты **не содержат** готовых эксплойт‑пайлоадов и не пытаются извлекать секреты/делать вредные действия.
Их цель — проверить инварианты: игнорирование инструкций из недоверенных источников, корректность цитирования,
устойчивость к Unicode/невидимым символам, ограничения egress/SSRF и т.д.

## Требования
- Запущенный LangGraph/Agent Server для open_deep_research (например, `http://127.0.0.1:2024`)
- Python 3.11+ (стандартная библиотека достаточно)

## Быстрый старт
1) Посмотреть список ассистентов:
```bash
python run_v01_indirect_prompt_injection.py --base-url http://127.0.0.1:2024 --print-assistants
```

2) Запустить тест:
```bash
python run_v02_citation_poisoning.py --base-url http://127.0.0.1:2024 --poc pocs/v02_citation_poisoning.md
```

Результат сохраняется в JSON (по умолчанию рядом со скриптом, см. `--out`).

## Рекомендация по методологии
- Для каждого теста прогоняйте **до** и **после** ваших патчей (security-hardening).
- Сравнивайте:
  - финальный текст ответа (extract),
  - JSON-структуру (если модель выполнила формат),
  - примитивные эвристики, которые печатает скрипт (pass/warn).

## Важно
Некоторые тесты (MCP/SSRF) требуют стенда:
- mock MCP server (безопасные tools)
- локальный HTTP redirector / страница с тестовым контентом

Скрипты подскажут, что именно подготовить.
